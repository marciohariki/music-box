(this["webpackJsonpmusic-box"]=this["webpackJsonpmusic-box"]||[]).push([[0],{140:function(e,t,n){e.exports=n(225)},149:function(e,t,n){},225:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(10),i=n.n(c),u=n(18),o=n(13),s=n(14),l=n(19),p=n(17),f=n(20),h=n(232),b=n(233),m=n(234),d=n(231),O=(n(149),"FETCH_PROFILE"),v="FETCH_PLAY_MUSIC",y="FETCH_PAUSE_MUSIC",j="FETCH_SKIP_TO_NEXT_MUSIC",k="FETCH_SKIP_TO_PREVIOUS_MUSIC",g=function(e){return{type:O,payload:e}},x=function(e){return{type:"LOAD_PROFILE",payload:e}},w=function(){return{type:"LOAD_PLAY_MUSIC"}},E=function(){return{type:"LOAD_PAUSE_MUSIC"}},I=function(){return{type:"LOAD_SKIP_TO_NEXT_MUSIC"}},S=function(){return{type:"LOAD_SKIP_TO_PREVIOUS_MUSIC"}},P=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.location.hash,t=/([^&;=]+)=?([^&;]*)/g.exec(e)[2];this.props.signIn(t)}},{key:"render",value:function(){return this.props.isSignedIn?a.a.createElement(d.a,{to:"/"}):a.a.createElement("div",null,"You have signed in. Redirecting to player...")}}]),t}(a.a.Component),C=Object(u.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),{signIn:function(e){return{type:"SIGN_IN",payload:e}}})(P),_=n(228),T=n(227),M=n(33),N=n(34),A=n(229);function U(){var e=Object(M.a)(["\n    margin: 0;\n    line-height: 16px;\n  "]);return U=function(){return e},e}function D(){var e=Object(M.a)(["\n    margin: 0;\n    line-height: 16px;\n  "]);return D=function(){return e},e}function L(){var e=Object(M.a)(["\n    display: flex;\n    align-items: start;\n    justify-content: center;\n    flex-direction: column;\n    color: white;\n    margin-right: 16px;\n  "]);return L=function(){return e},e}function H(){var e=Object(M.a)(["\n    width: 40px;\n    border-radius: 50%;\n  "]);return H=function(){return e},e}function F(){var e=Object(M.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: row;\n    color: white;\n  "]);return F=function(){return e},e}var R=function(e){var t=e.name,n=e.imgUrl;return a.a.createElement(K.Profile,null,a.a.createElement(K.Content,null,a.a.createElement(K.Name,null,t)),a.a.createElement(K.Image,{src:n}))},K={Profile:N.a.div(F()),Image:N.a.img(H()),Content:N.a.div(L()),Name:N.a.div(D()),Email:N.a.div(U())};function z(){var e=Object(M.a)(["\n    margin-right: auto;\n    line-height: 64px;\n  "]);return z=function(){return e},e}function G(){var e=Object(M.a)(["\n    display: flex;\n  "]);return G=function(){return e},e}var J=T.a.Header,X=function(e){var t=e.profile;return a.a.createElement(V.Header,null,a.a.createElement(V.MenuAntd,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"]},a.a.createElement(A.a.Item,{key:"1"},"nav 1"),a.a.createElement(A.a.Item,{key:"2"},"nav 2"),a.a.createElement(A.a.Item,{key:"3"},"nav 3")),function(){if(t)return a.a.createElement(R,t)}())},V={Header:Object(N.a)(J)(G()),MenuAntd:Object(N.a)(A.a)(z())},Y=function(e){var t=e.profile,n=e.children;return a.a.createElement(T.a,null,a.a.createElement(X,{profile:t}),a.a.createElement(T.a,{className:"layout"},a.a.createElement(T.a.Content,{style:{margin:"24px 16px",padding:24,background:"#fff",minHeight:280}},n)))},q=n(133),B=Object(q.a)((function(e){return e.user.profile}),(function(e){return e?{name:e.display_name,imgUrl:e.images.length&&e.images[0].url}:null})),Q=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchProfile()}},{key:"renderProfile",value:function(){var e=this.props.profile;return a.a.createElement(Y,{profile:e},a.a.createElement(_.a,{to:"/player",className:"ui button primary"},"Go to Player"))}},{key:"render",value:function(){var e=this.props,t=e.isSignedIn,n=e.profile;return t?n?this.renderProfile():a.a.createElement("div",null,"Loading..."):a.a.createElement(d.a,{to:"/"})}}]),t}(a.a.Component);Q.defaultProps={isSignedIn:!1,userProfile:null};var W=Object(u.b)((function(e){var t=B(e);return{isSignedIn:e.auth.isSignedIn,profile:t}}),{fetchProfile:g})(Q),Z=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).playerCheckInterval=setInterval((function(){return n.initPlayer()}),1e3),n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"initPlayer",value:function(){if(null!=window.Spotify){var e=this.props.accessToken;this.player=new window.Spotify.Player({name:"Musikiki Player",getOAuthToken:function(t){t(e)}}),this.player.connect(),clearInterval(this.playerCheckInterval),console.log("Player Initialized")}}},{key:"render",value:function(){return a.a.createElement("div",null,"Player")}}]),t}(a.a.Component),$=Object(u.b)((function(e){return{accessToken:e.auth.accessToken}}),null)(Z),ee=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).onClickSkipToPreviousMusic=function(){n.props.fetchSkipToPreviousMusic()},n.onClickSkipToNextMusic=function(){n.props.fetchSkipToNextMusic()},n.onClickPlayMusic=function(){n.props.fetchPlayMusic()},n.onClickPauseMusic=function(){n.props.fetchPauseMusic()},n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"ui raised"},a.a.createElement("i",{onClick:this.onClickSkipToPreviousMusic,className:"large middle aligned icon step backward"}),a.a.createElement("i",{onClick:this.onClickPlayMusic,className:"large middle aligned icon play"}),a.a.createElement("i",{onClick:this.onClickPauseMusic,className:"large middle aligned icon pause"}),a.a.createElement("i",{onClick:this.onClickSkipToNextMusic,className:"large middle aligned icon step forward"}))}}]),t}(a.a.Component),te={fetchPlayMusic:function(){return{type:v}},fetchPauseMusic:function(){return{type:y}},fetchSkipToNextMusic:function(){return{type:j}},fetchSkipToPreviousMusic:function(){return{type:k}}},ne=Object(u.b)(null,te)(ee),re=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchProfile()}},{key:"render",value:function(){var e=this.props.profile;return a.a.createElement(Y,{profile:e},a.a.createElement($,null),a.a.createElement(ne,null))}}]),t}(a.a.Component),ae={fetchProfile:g},ce=Object(u.b)((function(e){var t=B(e);return{isSignedIn:e.auth.isSignedIn,profile:t}}),ae)(re),ie=n(5),ue=n.n(ie),oe=n(32),se=n(230),le="cac2d66ca216494890245183d13e1ca6",pe="https://marciohariki.github.io/music-box/spotify-callback",fe=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).onClick=Object(oe.a)(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"streaming user-read-birthdate user-read-private user-read-email",t="https://accounts.spotify.com/authorize?",console.log(pe),t+="response_type=token",t+="&client_id=".concat(le),t+="&scope=".concat("streaming user-read-birthdate user-read-private user-read-email"),t+="&redirect_uri=".concat(pe),window.location=t;case 8:case"end":return e.stop()}}),e)}))),n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.props.isSignedIn?a.a.createElement(d.a,{to:"/profile"}):a.a.createElement(se.a,{type:"primary",onClick:this.onClick},"Login with Spotify")}}]),t}(a.a.Component),he=Object(u.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),null)(fe),be=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.profile;return a.a.createElement(Y,{profile:e},a.a.createElement(he,null))}}]),t}(a.a.Component),me=Object(u.b)((function(e){var t=B(e);return{isSignedIn:e.auth.isSignedIn,profile:t}}),null)(be),de=n(42),Oe=Object(de.a)(),ve=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement(h.a,{basename:"/music-box",history:Oe},a.a.createElement("div",{className:"ui container"},a.a.createElement(b.a,null,a.a.createElement(m.a,{path:"/",exact:!0,component:me}),a.a.createElement(m.a,{path:"/spotify-callback",component:C}),a.a.createElement(m.a,{path:"/profile",component:W}),a.a.createElement(m.a,{path:"/player",component:ce}),a.a.createElement(d.a,{to:"/"}))))}}]),t}(a.a.Component),ye=n(11),je=n(134),ke=n.n(je),ge=n(135),xe=n(100),we=n.n(xe),Ee=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"setItem",value:function(e,t){we.a.setItem(e,JSON.stringify(t))}},{key:"getItem",value:function(e){return JSON.parse(we.a.getItem(e))}}]),e}());function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Se=new(function(){function e(){Object(o.a)(this,e),this.key="session";var t=Ee.getItem(this.key);t||(t={accessToken:null}),this.session=t}return Object(s.a)(e,[{key:"setAccessToken",value:function(e){this.session=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(n,!0).forEach((function(t){Object(ge.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.session,{accessToken:e})}},{key:"getAccessToken",value:function(){return this.session.accessToken}},{key:"session",get:function(){return this._session},set:function(e){this._session=e,Ee.setItem(this.key,this.session)}}]),e}()),Pe=new(function(){function e(){Object(o.a)(this,e),this.api=ke.a.create({baseURL:"https://api.spotify.com/v1"})}return Object(s.a)(e,[{key:"getConfig",value:function(){return{headers:{Authorization:"Bearer ".concat(Se.getAccessToken())}}}},{key:"get",value:function(e){return this.api.get(e,this.getConfig())}},{key:"put",value:function(e){return this.api.put(e,null,this.getConfig())}},{key:"post",value:function(e){return this.api.post(e,null,this.getConfig())}}]),e}()),Ce=ue.a.mark(Me),_e=ue.a.mark(Ne),Te=function(){var e=Object(oe.a)(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.get("/me");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Me(){var e;return ue.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ye.a)(Te);case 3:return e=t.sent,t.next=6,Object(ye.c)(x(e));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(ye.a)((function(e){return console.log(e)}),t.t0);case 12:case"end":return t.stop()}}),Ce,null,[[0,8]])}function Ne(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ye.d)(O,Me);case 2:case"end":return e.stop()}}),_e)}var Ae=ue.a.mark(Je),Ue=ue.a.mark(Xe),De=ue.a.mark(Ye),Le=ue.a.mark(qe),He=ue.a.mark(Qe),Fe=ue.a.mark(We),Re=ue.a.mark($e),Ke=ue.a.mark(et),ze=ue.a.mark(tt),Ge=function(){var e=Object(oe.a)(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.put("/me/player/play");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Je(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ye.a)(Ge);case 3:return e.next=5,Object(ye.c)(w());case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,Object(ye.a)((function(e){return console.log("error is ".concat(e))}),e.t0);case 11:case"end":return e.stop()}}),Ae,null,[[0,7]])}function Xe(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ye.d)(v,Je);case 2:case"end":return e.stop()}}),Ue)}var Ve=function(){var e=Object(oe.a)(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.put("/me/player/pause");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Ye(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ye.a)(Ve);case 3:return e.next=5,Object(ye.c)(E());case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,Object(ye.a)((function(e){return console.log(e)}),e.t0);case 11:case"end":return e.stop()}}),De,null,[[0,7]])}function qe(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ye.d)(y,Ye);case 2:case"end":return e.stop()}}),Le)}var Be=function(){var e=Object(oe.a)(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.post("/me/player/next");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Qe(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ye.a)(Be);case 3:return e.next=5,Object(ye.c)(I());case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,Object(ye.a)((function(e){return console.log(e)}),e.t0);case 11:case"end":return e.stop()}}),He,null,[[0,7]])}function We(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ye.d)(j,Qe);case 2:case"end":return e.stop()}}),Fe)}var Ze=function(){var e=Object(oe.a)(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.post("/me/player/previous");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function $e(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ye.a)(Ze);case 3:return e.next=5,Object(ye.c)(S());case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,Object(ye.a)((function(e){return console.log(e)}),e.t0);case 11:case"end":return e.stop()}}),Re,null,[[0,7]])}function et(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ye.d)(k,$e);case 2:case"end":return e.stop()}}),Ke)}function tt(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ye.b)(Xe);case 2:return e.next=4,Object(ye.b)(qe);case 4:return e.next=6,Object(ye.b)(We);case 6:return e.next=8,Object(ye.b)(et);case 8:case"end":return e.stop()}}),ze)}var nt=ue.a.mark(rt);function rt(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ye.b)(Ne);case 2:return e.next=4,Object(ye.b)(tt);case 4:case"end":return e.stop()}}),nt)}var at=n(30),ct=n(136),it={isSignedIn:!!Se.getAccessToken(),accessToken:Se.getAccessToken()},ut={profile:null},ot=Object(at.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return Se.setAccessToken(t.payload),{isSignedIn:!0,accessToken:t.payload};case"SIGN_OUT":return Se.setAccessToken(null),{isSignedIn:!1,accessToken:null};default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_PROFILE":return{profile:t.payload};default:return e}}}),st=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||at.d,lt=Object(ct.a)(),pt=Object(at.e)(ot,st(Object(at.a)(lt)));pt.runSaga=lt.run;var ft=pt;ft.runSaga(rt),i.a.render(a.a.createElement(u.a,{store:ft},a.a.createElement(ve,null)),document.querySelector("#root"))}},[[140,1,2]]]);
//# sourceMappingURL=main.82b77ca7.chunk.js.map